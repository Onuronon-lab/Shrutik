name: Discord Notifications

on:
  push:
    branches: [ main, master ]
  pull_request:
    types: [opened, reopened, closed]
  issues:
    types: [opened, edited, closed]

jobs:
  notify:
    runs-on: ubuntu-latest
    if: ${{ secrets.DISCORD_WEBHOOK != '' }}
    steps:
      - name: Send Discord notification
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        with:
          args: |
            ðŸš€ **Shrutik Update**
            
            ${{ github.event_name == 'push' && format('ðŸ“¦ **{0}** pushed to `{1}`', github.actor, github.ref_name) || '' }}
            ${{ github.event_name == 'pull_request' && format('ðŸ”€ **{0}** {1} PR #{2}: {3}', github.actor, github.event.action, github.event.pull_request.number, github.event.pull_request.title) || '' }}
            ${{ github.event_name == 'issues' && format('ðŸ“‹ **{0}** {1} issue #{2}: {3}', github.actor, github.event.action, github.event.issue.number, github.event.issue.title) || '' }}
            
            ðŸ”— [View on GitHub](${{ github.event.pull_request.html_url || github.event.issue.html_url || github.event.repository.html_url }})